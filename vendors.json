{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "description": "Use default vendor config presets.",
  "extends": [
    "github>bfra-me/renovate-config:vendors/bfra-me",
    "github>bfra-me/renovate-config:vendors/exivity"
  ],

  "default": {
    "extends": "github>bfra-me/renovate-config:vendors"
  },

  "bfra-me": {
    "description": "Update dependencies for @bfra-me.",
    "packageRules": [
      {
        "commitMessageTopic": "{{{depName}}} preset",
        "groupName": "bfra-me config preset",
        "matchFileNames": [
          ".github/renovate.json5",
          ".github/renovate.json",
          ".gitlab/renovate.json5",
          ".gitlab/renovate.json",
          ".renovaterc.json5",
          ".renovaterc.json",
          ".renovaterc",
          "renovate.json5",
          "renovate.json"
        ],
        "matchPackageNames": ["bfra-me/renovate-config"]
      }
    ],
    "customManagers": [
      {
        "customType": "regex",
        "datasourceTemplate": "github-releases",
        "fileMatch": [
          "^\\.github\\/renovate\\.json5?$",
          "^\\.gitlab\\/renovate\\.json5?$",
          "^\\.renovaterc\\.json5?$",
          "^\\.renovaterc$",
          "^renovate\\.json5?$"
        ],
        "matchStrings": [
          "[\"']github>(?<depName>bfra-me\\/renovate-config)(?:(?::|\\/\\/)(?<path>.+?))?#(?<currentValue>.+?)[\"']"
        ],
        "versioningTemplate": "semver"
      }
    ]
  },

  "elstudio": {
    "description": "Update @elstudio/actions-settings digests in GitHub actions and workflows.",
    "customManagers": [
      {
        "customType": "regex",
        "autoReplaceStringTemplate": "uses: {{depName}}@{{#if newDigest}}{{newDigest}}{{#if newValue}} # {{newValue}}{{/if}}{{/if}}{{#unless newDigest}}{{newValue}}{{/unless}}",
        "datasourceTemplate": "git-refs",
        "depTypeTemplate": "action",
        "fileMatch": [
          "^(workflow-templates|\\.github/(?:workflows|actions))/[^/]+\\.ya?ml$",
          "(^|/)action\\.ya?ml$"
        ],
        "matchStrings": [
          "uses:\\s+(?<depName>elstudio\\/actions-settings)@(?<currentValue>v3-beta)",
          "uses:\\s+(?<depName>elstudio\\/actions-settings)@(?<currentDigest>[a-f0-9]+)"
        ],
        "packageNameTemplate": "https://github.com/elstudio/actions-settings"
      }
    ]
  },

  "exivity": {
    "description": "Update @exivity/actions digests in GitHub actions and workflows.",
    "packageRules": [
      {
        "groupName": "Exivity Actions",
        "matchDepPatterns": ["^exivity/actions(\\/.*)?$"],
        "schedule": ["after 5am on Monday"]
      }
    ],
    "customManagers": [
      {
        "customType": "regex",
        "fileMatch": [
          "^(workflow-templates|\\.github/(?:workflows|actions))/[^/]+\\.ya?ml$",
          "(^|/)action\\.ya?ml$"
        ],
        "matchStrings": [
          "uses:\\s+(?<depName>exivity\\/actions(?<path>\\/.*)?)@(?<currentDigest>[a-f0-9]+)",
          "uses:\\s+(?<depName>exivity\\/actions(?<path>\\/.*)?)@(?<currentValue>main)"
        ],
        "currentValueTemplate": "main",
        "autoReplaceStringTemplate": "uses: {{depName}}@{{#if newDigest}}{{newDigest}}{{#if newValue}} # {{newValue}}{{/if}}{{/if}}{{#unless newDigest}}{{newValue}}{{/unless}}",
        "packageNameTemplate": "https://github.com/exivity/actions",
        "depTypeTemplate": "action",
        "datasourceTemplate": "git-refs"
      }
    ]
  }
}
