{
  "automergeForCI": {
    "$schema": "https://docs.renovatebot.com/renovate-schema.json",
    "description": "Optimize settings for GitHub PRs and merge queues.",
    "automergeType": "pr",
    "platformAutomerge": true,
    "prCreation": "immediate",
    "rebaseWhen": "conflicted"
  },

  "automergeNonMajorUpdates": {
    "description": "Automerge all update types except `major` and unstable (`0.x.x`) versions.",
    "packageRules": [
      {
        "matchUpdateTypes": ["patch", "pin", "digest"],
        "extends": ["github>bfra-me/renovate-config:automerge"]
      },
      {
        "matchUpdateTypes": ["minor"],
        "matchCurrentVersion": "!/^0\\./",
        "extends": ["github>bfra-me/renovate-config:automerge"]
      }
    ]
  },

  "dashboardApprovalForMajorUpdates": {
    "description": "Enable dependency dashboard approval for major updates.",
    "major": {
      "dependencyDashboardApproval": true,
      "dependencyDashboardLabels": ["approval-pending"]
    },
    "packageRules": [
      {
        "matchPackageNames": ["go", "python", "typescript"],
        "matchUpdateTypes": ["minor"],
        "dependencyDashboardApproval": true,
        "dependencyDashboardLabels": ["approval-pending"]
      },
      {
        "matchCurrentVersion": ">=0.1.0 <1.0.0-0",
        "matchUpdateTypes": ["minor"],
        "dependencyDashboardApproval": true,
        "dependencyDashboardLabels": ["approval-pending"],
        "excludePackageNames": ["lucide-react"]
      }
    ]
  },

  "internal": {
    "extends": ["github>bfra-me/renovate-config:internal.json5"]
  },

  "pinGitHubActionDigestsToSemver": {
    "description": "Pin GitHub Action digests to semver versions.",
    "packageRules": [
      {
        "extends": ["helpers:pinGitHubActionDigestsToSemver"],
        "excludeDepPatterns": [
          "^elstudio/actions-settings(\\/.*)?$",
          "^exivity/actions(\\/.*)?$"
        ],
        "extractVersion": "^(?<version>?v\\d+(\\.\\d+\\.\\d+)?)$"
      }
    ]
  },

  "security": {
    "description": "Enable security updates from vulnerability alerts.",
    "extends": [":enableVulnerabilityAlertsWithLabel(security)"],
    "dependencyDashboardOSVVulnerabilitySummary": "none",
    "osvVulnerabilityAlerts": false
  },

  "weeklyLockFileUpdates": {
    "description": "Perform lock file maintenance every week.",
    "lockFileMaintenance": {
      "enabled": true,
      "schedule": ["before 6am on Monday"],
      "addLabels": ["scheduled"],
      "prBodyDefinitions": {
        "Change": "All lock files updated (every Monday before 6 AM)"
      },
      "extends": ["github>bfra-me/renovate-config:automerge"]
    }
  }
}
