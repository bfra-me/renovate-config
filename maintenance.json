{
  "automergeForCI": {
    "description": "Optimize settings for GitHub PRs and merge queues.",
    "automergeType": "pr",
    "platformAutomerge": true,
    "prCreation": "immediate",
    "rebaseWhen": "conflicted"
  },

  "automergeNonMajorUpdates": {
    "description": "Automerge all update types except `major` and unstable (`0.x.x`) versions.",
    "packageRules": [
      {
        "matchUpdateTypes": ["patch", "digest"],
        "extends": ["github>bfra-me/renovate-config:automerge.json5"]
      },
      {
        "matchUpdateTypes": ["minor"],
        "matchCurrentVersion": "!/^0\\./",
        "extends": ["github>bfra-me/renovate-config:automerge.json5"]
      }
    ]
  },

  "dashboardApprovalForMajorUpdates": {
    "description": "Enable dependency dashboard approval for major updates.",
    "major": {
      "dependencyDashboardApproval": true,
      "dependencyDashboardLabels": ["approval-pending"]
    },
    "packageRules": [
      {
        "matchPackageNames": ["go", "python", "typescript"],
        "matchUpdateTypes": ["minor"],
        "dependencyDashboardApproval": true,
        "dependencyDashboardLabels": ["approval-pending"]
      },
      {
        "matchCurrentVersion": ">=0.1.0 <1.0.0-0",
        "matchUpdateTypes": ["minor"],
        "dependencyDashboardApproval": true,
        "dependencyDashboardLabels": ["approval-pending"],
        "excludePackageNames": ["lucide-react"]
      }
    ]
  },

  "default": {
    "description": "Include default config presets for repository maintenance.",
    "extends": [
      ":rebaseStalePrs",
      ":prNotPending",
      ":prHourlyLimitNone",
      ":updateNotScheduled",
      ":enableVulnerabilityAlertsWithLabel(security)"
    ],
    "addLabels": ["dependencies"],

    "configMigration": true,
    "configWarningReuseIssue": false,

    "dependencyDashboardTitle": "Renovate Dashboard",

    "prConcurrentLimit": 5,
    "recreateClosed": true,

    "assigneesFromCodeOwners": true,
    "assigneesSampleSize": 1,
    "reviewersFromCodeOwners": true,
    "reviewersSampleSize": 1,

    "timezone": "America/Phoenix"
  },

  "internal": {
    "extends": ["github>bfra-me/renovate-config:internal.json5"]
  },

  "pinGitHubActionDigestsToSemver": {
    "description": "Pin GitHub Action digests to SemVer versions.",
    "packageRules": [
      {
        "matchDepTypes": ["action"],
        "excludeDepPatterns": [
          "^elstudio/actions-settings(\\/.*)?$",
          "^exivity/actions(\\/.*)?$"
        ],
        "extractVersion": "^(?<version>v?\\d+(\\.\\d+\\.\\d+)?)$",
        "pinDigests": true,
        "versioning": "regex:^v?(?<major>\\d+)(\\.(?<minor>\\d+)\\.(?<patch>\\d+))?$"
      }
    ]
  },

  "security": {
    "description": "Enable security updates from vulnerability alerts.",
    "extends": [":enableVulnerabilityAlertsWithLabel(security)"],
    "dependencyDashboardOSVVulnerabilitySummary": "none",
    "osvVulnerabilityAlerts": false
  },

  "weeklyLockFileUpdates": {
    "description": "Perform lock file maintenance every week.",
    "lockFileMaintenance": {
      "enabled": true,
      "schedule": ["before 6am on Monday"],
      "addLabels": ["scheduled"],
      "prBodyDefinitions": {
        "Change": "All lock files updated (every Monday before 6 AM)"
      },
      "extends": ["github>bfra-me/renovate-config:automerge.json5"]
    }
  }
}
